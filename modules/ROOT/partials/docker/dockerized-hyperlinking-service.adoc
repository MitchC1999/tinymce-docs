{% if shbundledockerfiles == false %}
### Deploy the TinyMCE hyperlinking server-side component using Docker (individually licensed)
{% elsif shbundledockerfiles == true %}
### Deploy the TinyMCE hyperlinking server-side component using Docker (self-hosted enterprise bundles)
{% endif %}
The TinyMCE hyperlinking server-side component can be deployed using Docker or a container orchestration application such as Kubernetes. {{site.companyname}} provides a pre-configured package for creating a Hyperlinking Docker image.

{% include misc/admon_dont-push-docker-images.md %}

{% if shbundledockerfiles == false %}

==== Prerequisites

* The https://docs.docker.com/engine/docker-overview/[Docker Engine] is installed and running.
* The user has Administrative or Root user access.
* The user is either:
 ** Using a Linux, Unix or macOS operating system.
 ** Using Windows and has access to unix command line tools using https://gitforwindows.org/[Git for Windows], https://www.cygwin.com/[Cygwin], or the https://docs.microsoft.com/en-us/windows/wsl/install-win10[Windows Subsystem for Linux].
{% endif %}

==== Procedure

The following procedure covers downloading, configuring, building and testing the {{site.productname}} Hyperlinking Docker image.
{% if shbundledockerfiles == true %}
> *Note*: This procedure assumes that a {{ site.productname }} self-hosted enterprise bundle has been extracted as described in <<downloadandextractthetinymceself-hostedbundle,Download and extract the TinyMCE Self-hosted Bundle>>.

. Navigate into the `tinymce-services` folder.
+
`sh
 cd tinymce-selfhosted/tinymce-services/
`

. Extract the contents of `ephox-hyperlinking-docker-starter-kit.zip`, such as:
+
`sh
 unzip ephox-hyperlinking-docker-starter-kit.zip -d hyperlinking-service-dockerfile
`
+
The structure of the extracted files will be:
+
`sh
 hyperlinking-service-dockerfile/
 ├── config
 │   └── ephox-hyperlinking-docker-env.conf
 ├── docker-entrypoint.sh
 ├── Dockerfile
 └── generate-jetty-start.sh
`

. Copy `ephox-hyperlinking.war` into the directory containing the extracted files, such as:
+
`sh
 cp ephox-hyperlinking.war hyperlinking-service-dockerfile/
`

. Navigate into the `hyperlinking-service-dockerfile` folder.
+
`sh
 cd hyperlinking-service-dockerfile
`

{% elsif shbundledockerfiles == false %}
1. Go to link:{{ site.accountpageurl }}[{{ site.accountpage }}] > My Downloads
and download either:

* _Tiny Enhanced Media Embed_, or
* _Tiny Link Checker_.

. Open a command line and navigate to the directory containing `ephox-hyperlinking_<version>.zip`. Windows Users should open a Bash command line as the Administrator User.
. Extract the contents of `ephox-hyperlinking_<version>.zip`, such as:
+
`sh
 unzip ephox-hyperlinking_<version>.zip -d tinymce-hyperlinking-service
`

. Navigate into the extracted folder.
+
`sh
 cd tinymce-hyperlinking-service
`

. Extract the contents of `ephox-hyperlinking-docker-starter-kit.zip`, such as:
+
`sh
 unzip ephox-hyperlinking-docker-starter-kit.zip
`
+
The structure of the current directory (`tinymce-hyperlinking-service/`) will be:
+
`sh
 tinymce-hyperlinking-service/
 ├── config
 │   └── ephox-hyperlinking-docker-env.conf
 ├── docker-entrypoint.sh
 ├── Dockerfile
 ├── ephox-hyperlinking-docker-starter-kit.zip
 ├── ephox-hyperlinking.war
 ├── generate-jetty-start.sh
 ├── license.txt
 ├── readme.txt
 └── version.txt
`
{% endif %}

. Set the permissions on the extracted files to executable.
+
`sh
 chmod +x *.sh
`

. _Optional_: Edit the `http` configuration settings in `config/ephox-hyperlinking-docker-env.conf`. The configurable settings are in the `http` section of the file. For example:
+
`conf
 http {
   max-connections = 100
   max-connections-per-host = 10
   max-redirects = 10
   max-retries = 3
   request-timeout-seconds = 10
   trust-all-cert = false
   websphere = {
     use-ssl-config = true
   }
 }
`
+
For information on the `http` configuration setting, see: link:{{site.baseurl}}/enterprise/server/configure/#httpoptional[Configure server-side components - `http`].

. _Optional_: Update the link-checking cache configuration, as described in link:{{site.baseurl}}/enterprise/check-links/#linkcheckerself-hostedquicksetup[Link Checker self-hosted quick setup].
. _Optional_: Configure the Enhanced Media Embed Service, as described in link:{{site.baseurl}}/enterprise/embed-media/mediaembed-server-config/[Configure Enhanced Media Embed Server].
. _Optional_: Configure the service to use a HTTP proxy by updating `config/ephox-hyperlinking-docker-env.conf`. See: link:{{site.baseurl}}/enterprise/server/configure/#proxyoptional[Configure server-side components - proxy].
. Create an `origins.env` file in the same directory as the `Dockerfile`, and specify the Hypertext Transfer Protocol (HTTP) and domain name of sites hosting the TinyMCE editor (`allowed-origins`). Up to 99 origins can be added without editing `config/ephox-hyperlinking-docker-env.conf`.
+
For example:
+
`+conf
 ORIGIN0=example.net
 ORIGIN1=example
 ORIGIN2=http://example.org
+`
+
For information on `allowed-origins`, see: link:{{site.baseurl}}/enterprise/server/configure/#allowed-originsrequired[Configure server-side components - allowed-origins].

. As the root user or Administrator, build the {{site.productname}} Hyperlinking Docker image using the following command:
+
`sh
 docker build -t tinymce-hyperlinking-service .
`

. As the root user or Administrator, deploy the service using the following command:
+
`sh
 docker run -d -p 8083:8080 --env-file origins.env tinymce-hyperlinking-service
`
+
Where:

 ** `-p 8083:8080` maps the container port `8080` to local port `8083`.
 ** `--env-file origins.env` adds the allowed origins to the container.

. To verify that the Docker container is deployed and the hyperlinking service is running, execute:
+
`+sh
curl http://localhost:8083/ephox-hyperlinking/
+`
+
The response from the `curl` command should be:
+
`sh
Link checking and media embedding service is running.
`

The {{site.productname}} Hyperlinking Docker image can now be pushed to a private container registry for deployment on https://kubernetes.io/[Kubernetes], https://docs.docker.com/engine/swarm/[Docker Swarm] or https://www.openshift.com/[OpenShift].
